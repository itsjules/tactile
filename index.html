<!DOCTYPE html>
<html>

<head>
    <title>sum trash</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <script type="module" src="lib/p5.min.js"></script>
    <script type="module" src="lib/p5.sound.min.js"></script>
    <script type="module" src="p5setup.js"></script>
    <script type="module" src="main.js"></script>
    <script src="lib/jquery-3.5.1.min.js"></script>
    <script src="funcs.js"></script>
</head>

<body class="intro" id="showRoom">
    <section class="intro">
        <p>Hallo</p>
        <button class="imgBtn">weiter</button>
    </section>
    <section class="leitlinie">
        <p>Leitleit</p>

        <button onclick="sectionForward(); imgChangeSection()">weiter</button>
        <button onclick="sectionBackward();imgChangeSection()">zurück</button>
    </section>
    <section class="gleishalle">
        <p>laute Züge</p>
       
        <button class="imgBtn">weiter</button>
        <button onclick="sectionBackward(); imgChangeSection()">zurück</button>
    </section>
    <section class="nutzergruppe">
        <p>Blindgänger</p>
        <button onclick="sectionForward(); imgChangeSection()">weiter</button>
        <button onclick="sectionBackward(); imgChangeSection()">zurück</button>
    </section>
    <section class="bahnhofshalle">
        <p>Dreckiger Boden </p>
        <button class="imgBtn">weiter</button>
        <button onclick="sectionBackward(); imgChangeSection()">zurück</button>
    </section>
    <section class="beforeProblem">
        <button onclick="sectionForward()">weiter</button>
        <button onclick="sectionBackward()">zurück</button>
    </section>
    <section class="problem">
        <p>Problemus Apfelmus</p>
        <button onclick="sectionForward()">weiter</button>
        <button onclick="sectionBackward()">zurück</button>
    </section>
    <section class="afterProblem">
        <button onclick="sectionForward()">weiter</button>
        <button onclick="sectionBackward()">zurück</button>
    </section>
    <section class="transformation">
        <video id="transformationVideo" src="/assets/vid/Believix.webm"></video>
        <audio id="transformationAudio" src="/assets/sound/harp-magic-dream-sound-effect.mp3"></audio>
        <button onclick="sectionForward()">weiter</button>
        <button onclick="sectionBackward()">zurück</button>
    </section>
    <section class="afterTransformation">
        <button onclick="sectionForward()">weiter</button>
        <button onclick="sectionBackward()">zurück</button>
    </section>
    <section class="lösung">
        <p>Kaufen Sie unser Produkt</p>
        <button onclick="sectionForward()">weiter</button>
        <button onclick="sectionBackward()">zurück</button>
    </section>
    <section class="afterLösung">
        <button onclick="sectionForward()">weiter</button>
        <button onclick="sectionBackward()">zurück</button>

    </section>
    <section class="technik">
        <p>404 brain not found</p>
        <button onclick="sectionForward()">weiter</button>
        <button onclick="sectionBackward()">zurück</button>
    </section>
    <section class="afterTechnik">
        <p>needs Canvas case</p>
        <button onclick="sectionForward()">weiter</button>
        <button onclick="sectionBackward()">zurück</button>
    </section>
    <section class="skalierbarkeit">
        <p>Wir sind krass</p>
        <button onclick="sectionBackward()">zurück</button>
    </section>

</body>

<script>
    let s = 1;
    let sections;

    let imgButtons;
    // console.log(imgButtons);

    // let weiterButton=document.getElementById("jumpSection");
    // weiterButton.addEventListener("click",replace);

    function onLoad() {
        sections = document.getElementsByTagName("section");
        imgButtons=document.getElementsByClassName("imgBtn");
        for(i=0; i<imgButtons.length;i++){
            imgButtons[i].addEventListener("click",replace);
        }
        // console.log(sections);
        
    }
    window.onload = onLoad;

    function sectionForward() {
        let a;
        for (i = 0; i < sections.length; i++) {
            if (sections[i].className === document.body.className) {
                a = i;
                //   console.log({a});
                $("body").removeClass();
                $("body").addClass(sections[a + 1].className);
                //   console.log(document.body.className); 
                return;
            }
        }
    }

    function sectionBackward() {
        let b;
        for (i = 0; i < sections.length; i++) {
            if (sections[i].className === document.body.className) {
                b = i;
                //   console.log({b});
                $("body").removeClass();
                $("body").addClass(sections[b - 1].className);
                //   console.log(document.body.className); 
                return;
            }
        }
    }

    function replace() {
        s++;
        let section;
        for (i = 0; i < sections.length; i++) {
            if (sections[i].className === document.body.className) {
              section=sections[i];
            }
        }
        console.log(section);
        section.style.backgroundImage = `url(assets/img/${document.body.className}_${s}.jpg)`;
        console.log("replace: "+s, document.body.className);
        if (s > 2) {
            s = 0;
            console.log("juhu");
            for(i=0; i<imgButtons.length;i++){
            imgButtons[i].removeEventListener("click",replace);
            imgButtons[i].addEventListener("click",sectionForward);
            }
            return;
        }
    }

    function imgChangeSection() {
        s = 1;
        let section;
        for (i = 0; i < sections.length; i++) {
            if (sections[i].className === document.body.className) {
              section=sections[i];
            }
        }
        section.style.backgroundImage = `url(assets/img/${document.body.className}_${s}.jpg)`;
        for(i=0; i<imgButtons.length;i++){
            imgButtons[i].removeEventListener("click",sectionForward);
            imgButtons[i].addEventListener("click",replace);
            
            }
        console.log("imgChangeSection: "+s,document.body.className);
    }

</script>

</html>